<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>torch tensoræ“ä½œ | foresta</title><meta name="keywords" content="Pytorch,tensor"><meta name="author" content="foresta.yang"><meta name="copyright" content="foresta.yang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="torch tensoræ“ä½œ"><meta name="application-name" content="torch tensoræ“ä½œ"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="torch tensoræ“ä½œ"><meta property="og:url" content="https://foresta-yang.github.io/2023/12/19/AILearning/pytorch/tensor%E6%93%8D%E4%BD%9C/index.html"><meta property="og:site_name" content="foresta"><meta property="og:description" content="ä¸€ã€å¼ é‡çš„åŸºæœ¬æ“ä½œ Pytorch ä¸­ï¼Œå¼ é‡çš„æ“ä½œåˆ†ä¸ºç»“æ„æ“ä½œå’Œæ•°å­¦è¿ç®—ï¼Œå…¶ç†è§£å°±å¦‚å­—é¢æ„æ€ã€‚ç»“æ„æ“ä½œå°±æ˜¯æ”¹å˜å¼ é‡æœ¬èº«çš„ç»“æ„ï¼Œæ•°å­¦è¿ç®—å°±æ˜¯å¯¹å¼ é‡çš„å…ƒç´ å€¼å®Œæˆæ•°å­¦è¿ç®—ã€‚  å¸¸ä½¿ç”¨çš„å¼ é‡ç»“æ„æ“ä½œï¼šç»´åº¦å˜æ¢ï¼ˆtranposeã€view ç­‰ï¼‰ã€åˆå¹¶åˆ†å‰²ï¼ˆsplitã€chunkç­‰ï¼‰ã€ç´¢å¼•åˆ‡ç‰‡ï¼ˆindex_s"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://foresta-yang.github.io/img/cover-default.webp"><meta property="article:author" content="foresta.yang"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://foresta-yang.github.io/img/cover-default.webp"><meta name="description" content="ä¸€ã€å¼ é‡çš„åŸºæœ¬æ“ä½œ Pytorch ä¸­ï¼Œå¼ é‡çš„æ“ä½œåˆ†ä¸ºç»“æ„æ“ä½œå’Œæ•°å­¦è¿ç®—ï¼Œå…¶ç†è§£å°±å¦‚å­—é¢æ„æ€ã€‚ç»“æ„æ“ä½œå°±æ˜¯æ”¹å˜å¼ é‡æœ¬èº«çš„ç»“æ„ï¼Œæ•°å­¦è¿ç®—å°±æ˜¯å¯¹å¼ é‡çš„å…ƒç´ å€¼å®Œæˆæ•°å­¦è¿ç®—ã€‚  å¸¸ä½¿ç”¨çš„å¼ é‡ç»“æ„æ“ä½œï¼šç»´åº¦å˜æ¢ï¼ˆtranposeã€view ç­‰ï¼‰ã€åˆå¹¶åˆ†å‰²ï¼ˆsplitã€chunkç­‰ï¼‰ã€ç´¢å¼•åˆ‡ç‰‡ï¼ˆindex_s"><link rel="shortcut icon" href="/img/foresta.png"><link rel="canonical" href="https://foresta-yang.github.io/2023/12/19/AILearning/pytorch/tensor%E6%93%8D%E4%BD%9C/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: undefined,
  diytitle: undefined,
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: 'https://mytwikoo-omega.vercel.app',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€","rightMenuMsgToTraditionalChinese":"è½¬ä¸ºç¹ä½“","rightMenuMsgToSimplifiedChinese":"è½¬ä¸ºç®€ä½“"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":66,"languages":{"author":"ä½œè€…: foresta.yang","link":"é“¾æ¥: ","source":"æ¥æº: foresta","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚","copySuccess":"å¤åˆ¶æˆåŠŸï¼Œå¤åˆ¶å’Œè½¬è½½è¯·æ ‡æ³¨æœ¬æ–‡åœ°å€"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'foresta',
  title: 'torch tensoræ“ä½œ',
  postAI: '',
  pageFillDescription: ' ä¸€ã€å¼ é‡çš„åŸºæœ¬æ“ä½œ,  äºŒã€ç»´åº¦å˜æ¢,  2.1 squeeze vs unsqueeze ç»´åº¦å¢å‡,  2.2 transpose vs permute ç»´åº¦äº¤æ¢,  2.3 reshape vs view,  2.4 einsum,  ä¸‰ã€ç´¢å¼•åˆ‡ç‰‡,  3.1 è§„åˆ™ç´¢å¼•åˆ‡ç‰‡æ–¹å¼,  3.2 gather å’Œ torch.index_select ç®—å­,  å››ã€åˆå¹¶åˆ†å‰²,  4.1 torch.cat å’Œ torch.stack,  4.2 torch.split å’Œ torch.chunk,  äº”ã€å·ç§¯ç›¸å…³ç®—å­,  5.1 ä¸Šé‡‡æ ·æ–¹æ³•æ€»ç»“,  5.2 F.interpolate é‡‡æ ·å‡½æ•°,  5.3 nn.ConvTranspose2d åå·ç§¯,  å¼•ç”¨ä¸€å¼ é‡çš„åŸºæœ¬æ“ä½œä¸­å¼ é‡çš„æ“ä½œåˆ†ä¸ºç»“æ„æ“ä½œå’Œæ•°å­¦è¿ç®—å…¶ç†è§£å°±å¦‚å­—é¢æ„æ€ç»“æ„æ“ä½œå°±æ˜¯æ”¹å˜å¼ é‡æœ¬èº«çš„ç»“æ„æ•°å­¦è¿ç®—å°±æ˜¯å¯¹å¼ é‡çš„å…ƒç´ å€¼å®Œæˆæ•°å­¦è¿ç®—å¸¸ä½¿ç”¨çš„å¼ é‡ç»“æ„æ“ä½œç»´åº¦å˜æ¢ç­‰åˆå¹¶åˆ†å‰²ç­‰ç´¢å¼•åˆ‡ç‰‡ç­‰å¸¸ä½¿ç”¨çš„å¼ é‡æ•°å­¦è¿ç®—æ ‡é‡è¿ç®—å‘é‡è¿ç®—çŸ©é˜µè¿ç®—äºŒç»´åº¦å˜æ¢ç»´åº¦å¢å‡å¯¹è¿›è¡Œç»´åº¦çš„å‹ç¼©å»æ‰ç»´æ•°ä¸ºçš„ç»´åº¦ç”¨æ³•å°†ä¸­æ‰€æœ‰ä¸ºçš„ç»´åº¦éƒ½åˆ é™¤æˆ–è€…æ˜¯å»æ‰ä¸­æŒ‡å®šçš„ç»´æ•°ä¸ºçš„ç»´åº¦å¯¹æ•°æ®ç»´åº¦è¿›è¡Œæ‰©å……ç»™æŒ‡å®šä½ç½®åŠ ä¸Šç»´æ•°ä¸ºçš„ç»´åº¦ç”¨æ³•æˆ–è€…åœ¨ä¸­æŒ‡å®šä½ç½®åŠ ä¸Šä¸€ä¸ªç»´æ•°ä¸ºçš„ç»´åº¦ç”¨ä¾‹ç¨‹åºå¦‚ä¸‹ç¨‹åºè¾“å‡ºç»“æœå¦‚ä¸‹ç”¨ä¾‹ç¨‹åºå¦‚ä¸‹ç¨‹åºè¾“å‡ºç»“æœå¦‚ä¸‹ç»´åº¦äº¤æ¢åªèƒ½äº¤æ¢ä¸¤ä¸ªç»´åº¦è€Œå¯ä»¥è‡ªç”±äº¤æ¢ä»»æ„ä½ç½®å‡½æ•°å®šä¹‰å¦‚ä¸‹åœ¨æ¨¡å‹ä¸­æˆ‘ä»¬ç»å¸¸é‡åˆ°äº¤æ¢ç»´åº¦çš„é—®é¢˜ä¸¾ä¾‹å››ä¸ªç»´åº¦è¡¨ç¤ºçš„å¦‚æœæƒ³æŠŠæ”¾åˆ°æœ€åå»å½¢æˆå¦‚æœä½¿ç”¨æ–¹æ³•è‡³å°‘è¦äº¤æ¢ä¸¤æ¬¡å…ˆäº¤æ¢å†äº¤æ¢è€Œä½¿ç”¨æ–¹æ³•åªéœ€ä¸€æ¬¡æ“ä½œæ›´åŠ æ–¹ä¾¿ä¾‹å­ç¨‹åºå¦‚ä¸‹åªé€‚åˆå¯¹æ»¡è¶³è¿ç»­æ€§æ¡ä»¶çš„è¿›è¡Œæ“ä½œè€ŒåŒæ—¶è¿˜å¯ä»¥å¯¹ä¸æ»¡è¶³è¿ç»­æ€§æ¡ä»¶çš„è¿›è¡Œæ“ä½œå…·æœ‰æ›´å¥½çš„é²æ£’æ€§èƒ½å¹²çš„éƒ½èƒ½å¹²å¦‚æœä¸èƒ½å¹²å°±å¯ä»¥ç”¨æ¥å¤„ç†æ›´å¤šå¯çœ‹é¦–å…ˆçœ‹ä¸‹å®ç°çŸ©é˜µä¹˜æ³•çš„ä¾‹å­è¯­ä¹‰è§£æè¾“å…¥é˜¶å¼ é‡ä¸‹æ ‡ä¸ºè¾“å…¥é˜¶å¼ é‡ä¸‹æ ‡ä¸ºè¾“å‡ºé˜¶å¼ é‡ä¸‹æ ‡ä¸ºå’Œç­‰ä»·æ“ä½œè¯­ä¹‰è§£æè¾“å…¥é˜¶å¼ é‡ä¸‹æ ‡ä¸ºè¾“å…¥é˜¶å¼ é‡ä¸‹æ ‡ä¸ºè¾“å‡ºé˜¶å¼ é‡ä¸‹æ ‡ä¸ºå’Œè¿™ä¸ªæ–¹æ³•å¯ä»¥å®ç°çŸ©é˜µä¹˜æ³•ä½†æ˜¯ä¹Ÿå¯ä»¥ç”¨æ¥æ›´æ¢ç»´åº¦è¯­ä¹‰è§£æå½“åé¢åªæœ‰ä¸€ä¸ªå¼ é‡æ—¶å°±æ˜¯å¯¹è‡ªå·±ç»´åº¦è¿›è¡Œå˜æ¢æ¯”è¾ƒå¸¸ç”¨çš„å°±æ˜¯å°†æ¢åˆ°æœ€åæ›´å¤šå¯çœ‹ä¸‰ç´¢å¼•åˆ‡ç‰‡è§„åˆ™ç´¢å¼•åˆ‡ç‰‡æ–¹å¼å¼ é‡çš„ç´¢å¼•åˆ‡ç‰‡æ–¹å¼å’Œå¤šç»´åˆ—è¡¨å‡ ä¹ä¸€è‡´éƒ½å¯ä»¥é€šè¿‡ç´¢å¼•å’Œåˆ‡ç‰‡å¯¹éƒ¨åˆ†å…ƒç´ è¿›è¡Œä¿®æ”¹åˆ‡ç‰‡æ—¶æ”¯æŒç¼ºçœå‚æ•°å’Œçœç•¥å·å®ä¾‹ä»£ç å¦‚ä¸‹ç¬¬è¡Œæ•°æ®ç¬¬è‡³ç¬¬è¡Œå…¨éƒ¨åˆ—ç¬¬è¡Œè‡³ç¬¬è¡Œç¬¬è¡Œè‡³æœ€åè¡Œæœ€åä¸€åˆ—ç¬¬è¡Œè‡³æœ€åè¡Œç¬¬åˆ—åˆ°æœ€åä¸€åˆ—æ¯éš”ä¸¤åˆ—å–ä¸€åˆ—ä»¥ä¸Šåˆ‡ç‰‡æ–¹å¼ç›¸å¯¹è§„åˆ™å¯¹äºä¸è§„åˆ™çš„åˆ‡ç‰‡æå–å¯ä»¥ä½¿ç”¨å’Œç®—å­ç®—å­çš„ç”¨æ³•æ¯”è¾ƒéš¾ä»¥ç†è§£åœ¨ç¿»é˜…äº†å®˜æ–¹æ–‡æ¡£å’Œç½‘ä¸Šèµ„æ–™åæˆ‘æœ‰äº†ä¸€äº›è‡ªå·±çš„ç†è§£æ˜¯ä¸è§„åˆ™çš„åˆ‡ç‰‡æå–ç®—å­åœ¨æŒ‡å®šç»´åº¦ä¸Šæ ¹æ®ç´¢å¼•æ¥é€‰å–æ•°æ®å‡½æ•°å®šä¹‰å¦‚ä¸‹å‚æ•°è§£é‡Šå¯¹äºå€¼çš„å®šä¹‰å¦‚ä¸‹çš„å®˜æ–¹å®šä¹‰å¦‚ä¸‹ä¸‹é¢ç»“åˆå’Œçš„ç”¨ä¾‹æ¥ç›´è§‚ç†è§£ç®—å­ç”¨æ³•å¯¹äºçš„ä¾‹å­é€‰å–å¯¹è§’çº¿å…ƒç´ å€¼å®šä¹‰å¦‚ä¸‹æŒ‰ç…§é¡ºåºä½œç”¨åœ¨è¡Œä¸Šç´¢å¼•ä¾æ¬¡ä¸ºç´¢å¼•æ›´å¤æ‚çš„ä¾‹å­å€¼çš„è®¡ç®—å¦‚ä¸‹æ€»ç»“å¯ä»¥çœ‹åˆ°æ˜¯é€šè¿‡å°†ç´¢å¼•åœ¨æŒ‡å®šç»´åº¦ä¸Šçš„å€¼æ›¿æ¢ä¸ºçš„å€¼ä½†æ˜¯å…¶ä»–ç»´åº¦ç´¢å¼•ä¸å˜çš„æƒ…å†µä¸‹è·å–æ•°æ®ç›´è§‚ä¸Šå¯ä»¥ç†è§£ä¸ºå¯¹çŸ©é˜µè¿›è¡Œé‡æ’æ¯”å¦‚å¯¹æ¯ä¸€è¡Œçš„å…ƒç´ è¿›è¡Œå˜æ¢æ¯”å¦‚çš„ä½œç”¨å°±æ˜¯å¯¹çŸ©é˜µæ¯ä¸€è¡Œçš„å…ƒç´ è¿›è¡Œæ“ä½œç†è§£äº†å†çœ‹å°±å¾ˆç®€å•å‡½æ•°ä½œç”¨æ˜¯è¿”å›æ²¿ç€è¾“å…¥å¼ é‡çš„æŒ‡å®šç»´åº¦çš„æŒ‡å®šç´¢å¼•å·è¿›è¡Œç´¢å¼•çš„å¼ é‡å­é›†å‡½æ•°å®šä¹‰å¦‚ä¸‹å‡½æ•°è¿”å›ä¸€ä¸ªæ–°çš„å¼ é‡å®ƒä½¿ç”¨æ•°æ®ç±»å‹ä¸ºçš„ä¸­çš„æ¡ç›®æ²¿ç»´åº¦ç´¢å¼•è¾“å…¥å¼ é‡è¿”å›çš„å¼ é‡å…·æœ‰ä¸åŸå§‹å¼ é‡è¾“å…¥ç›¸åŒçš„ç»´æ•°ç»´åº¦å°ºå¯¸ä¸ç´¢å¼•é•¿åº¦ç›¸åŒå…¶ä»–å°ºå¯¸ä¸åŸå§‹å¼ é‡ä¸­çš„å°ºå¯¸ç›¸åŒå®ä¾‹ä»£ç å¦‚ä¸‹å››åˆå¹¶åˆ†å‰²å’Œå¯ä»¥ç”¨æ–¹æ³•å’Œæ–¹æ³•å°†å¤šä¸ªå¼ é‡åˆå¹¶ä¹Ÿå¯ä»¥ç”¨æ–¹æ³•æŠŠä¸€ä¸ªå¼ é‡åˆ†å‰²æˆå¤šä¸ªå¼ é‡å’Œæœ‰ç•¥å¾®çš„åŒºåˆ«æ˜¯è¿æ¥ä¸ä¼šå¢åŠ ç»´åº¦è€Œæ˜¯å †å ä¼šå¢åŠ ä¸€ä¸ªç»´åº¦ä¸¤è€…å‡½æ•°å®šä¹‰å¦‚ä¸‹å’Œç”¨æ³•å®ä¾‹ä»£ç å¦‚ä¸‹ä¸­å’Œå‚æ•°åå¯ä»¥æ··ç”¨å’Œå’Œå¯ä»¥çœ‹ä½œæ˜¯çš„é€†è¿ç®—ä½œç”¨æ˜¯å°†å¼ é‡æ‹†åˆ†ä¸ºå¤šä¸ªå—æ¯ä¸ªå—éƒ½æ˜¯åŸå§‹å¼ é‡çš„è§†å›¾å‡½æ•°å®šä¹‰å¦‚ä¸‹ä½œç”¨æ˜¯å°†æŒ‰è¡Œæˆ–åˆ—åˆ†å‰²æˆä¸ªå—è¿”å›çš„æ˜¯ä¸€ä¸ªå…ƒç»„å‡½æ•°å®šä¹‰å¦‚ä¸‹å®ä¾‹ä»£ç å¦‚ä¸‹äº”å·ç§¯ç›¸å…³ç®—å­ä¸Šé‡‡æ ·æ–¹æ³•æ€»ç»“ä¸Šé‡‡æ ·å¤§è‡´è¢«æ€»ç»“æˆäº†ä¸‰ä¸ªç±»åˆ«åŸºäºçº¿æ€§æ’å€¼çš„ä¸Šé‡‡æ ·æœ€è¿‘é‚»ç®—æ³•åŒçº¿æ€§æ’å€¼ç®—æ³•åŒä¸‰æ¬¡æ’å€¼ç®—æ³•ç­‰è¿™æ˜¯ä¼ ç»Ÿå›¾åƒå¤„ç†æ–¹æ³•åŸºäºæ·±åº¦å­¦ä¹ çš„ä¸Šé‡‡æ ·è½¬ç½®å·ç§¯ä¹Ÿå«åå·ç§¯ç­‰çš„æ–¹æ³•ç®€å•çš„è¡¥é›¶æˆ–è€…æ‰©å……æ“ä½œè®¡ç®—æ•ˆæœæœ€è¿‘é‚»æ’å€¼ç®—æ³•åŒçº¿æ€§æ’å€¼åŒä¸‰æ¬¡æ’å€¼è®¡ç®—é€Ÿåº¦æœ€è¿‘é‚»æ’å€¼ç®—æ³•åŒçº¿æ€§æ’å€¼åŒä¸‰æ¬¡æ’å€¼é‡‡æ ·å‡½æ•°è€ç‰ˆæœ¬æœ‰å‡½æ•°æ–°ç‰ˆæœ¬å»ºè®®ç”¨ä¸€ä¸ªå‡½æ•°å¯å®ç°å®šåˆ¶åŒ–éœ€æ±‚çš„ä¸Šé‡‡æ ·æˆ–è€…ä¸‹é‡‡æ ·åŠŸèƒ½å‡½æ•°å…¨ç§°æ˜¯å‡½æ•°å®šä¹‰å¦‚ä¸‹å‚æ•°è§£é‡Šå¦‚ä¸‹è¾“å…¥å¼ é‡æ•°æ®è¾“å‡ºçš„å°ºå¯¸æ•°æ®ç±»å‹ä¸ºå’ŒäºŒé€‰ä¸€åœ¨é«˜åº¦å®½åº¦å’Œæ·±åº¦ä¸Šé¢çš„æ”¾å¤§å€æ•°æ•°æ®ç±»å‹æ—¢å¯ä»¥æ˜¯è¡¨æ˜é«˜åº¦å®½åº¦æ·±åº¦éƒ½æ‰©å¤§åŒä¸€å€æ•°ä¹Ÿå¯æ˜¯æŒ‡å®šé«˜åº¦å®½åº¦æ·±åº¦ç­‰ç»´åº¦çš„æ‰©å¤§å€æ•°ä¸Šé‡‡æ ·çš„æ–¹æ³•åŒ…æ‹¬æœ€è¿‘é‚»çº¿æ€§æ’å€¼åŒçº¿æ€§æ’å€¼ä¸‰æ¬¡çº¿æ€§æ’å€¼é»˜è®¤æ˜¯æœ€è¿‘é‚»å¦‚æœè®¾ä¸ºè¾“å…¥å›¾åƒå’Œè¾“å‡ºå›¾åƒè§’ç‚¹çš„åƒç´ å°†ä¼šè¢«å¯¹é½è¿™åªåœ¨æ‰æœ‰æ•ˆé»˜è®¤ä¸ºä¾‹å­ç¨‹åºå¦‚ä¸‹åå·ç§¯è½¬ç½®å·ç§¯æœ‰æ—¶å€™ä¹Ÿç§°ä¸ºåå·ç§¯ä¸ªäººè§‰å¾—è¿™ç§å«æ³•ä¸æ˜¯å¾ˆè§„èŒƒå®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„å·ç§¯å…ˆæ¥æ‰©å¤§å›¾åƒå°ºå¯¸ç´§æ¥ç€è·Ÿæ­£å‘å·ç§¯ä¸€æ ·æ—‹è½¬å·ç§¯æ ¸åº¦å†è¿›è¡Œå·ç§¯è®¡ç®—å¼•ç”¨',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-12-19 16:28:29',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 7.0.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="åŠ è½½å¤´åƒ" src="https://foresta.oss-cn-beijing.aliyuncs.com/imgs/head.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">foresta</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> æ–‡ç« </span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> éš§é“</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> å‹é“¾</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> å‹äººå¸</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> ç•™è¨€æ¿</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> æˆ‘çš„</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> ç›¸å†Œ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> å³åˆ»emo</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> å…³äº</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> å…³äºæœ¬äºº</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="éšæœºå‰å¾€ä¸€ä¸ªæ–‡ç« " href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="æœç´¢ğŸ”" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> æœç´¢</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="ä¸­æ§å°" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://foresta.oss-cn-beijing.aliyuncs.com/imgs/wechat.jpg" target="_blank"><img class="post-qr-code-img" alt="å¾®ä¿¡" src="https://foresta.oss-cn-beijing.aliyuncs.com/imgs/wechat.jpg"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="https://foresta.oss-cn-beijing.aliyuncs.com/imgs/alipay.jpg" target="_blank"><img class="post-qr-code-img" alt="æ”¯ä»˜å®" src="https://foresta.oss-cn-beijing.aliyuncs.com/imgs/alipay.jpg"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">äº’åŠ¨</div><span class="author-content-item-title"> æœ€æ–°è¯„è®º</span></div><div class="aside-list"><span>æ­£åœ¨åŠ è½½ä¸­...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">å…´è¶£ç‚¹</div><span class="author-content-item-title">å¯»æ‰¾ä½ æ„Ÿå…´è¶£çš„é¢†åŸŸ</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Binary/" style="font-size: 1.05rem;">Binary<sup>1</sup></a><a href="/tags/C-C/" style="font-size: 1.05rem;">C/C++<sup>2</sup></a><a href="/tags/CNN/" style="font-size: 1.05rem;">CNN<sup>1</sup></a><a href="/tags/DGL/" style="font-size: 1.05rem;">DGL<sup>1</sup></a><a href="/tags/DL%E7%9F%A5%E8%AF%86/" style="font-size: 1.05rem;">DLçŸ¥è¯†<sup>1</sup></a><a href="/tags/DL%E7%9F%A5%E8%AF%86%E7%82%B9/" style="font-size: 1.05rem;">DLçŸ¥è¯†ç‚¹<sup>3</sup></a><a href="/tags/Hexo/" style="font-size: 1.05rem;">Hexo<sup>2</sup></a><a href="/tags/LLM/" style="font-size: 1.05rem;">LLM<sup>1</sup></a><a href="/tags/LaTex/" style="font-size: 1.05rem;">LaTex<sup>1</sup></a><a href="/tags/PowerShell/" style="font-size: 1.05rem;">PowerShell<sup>1</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>1</sup></a><a href="/tags/Pytorch/" style="font-size: 1.05rem;">Pytorch<sup>6</sup></a><a href="/tags/Vulnerabilities/" style="font-size: 1.05rem;">Vulnerabilities<sup>19</sup></a><a href="/tags/conda/" style="font-size: 1.05rem;">conda<sup>1</sup></a><a href="/tags/git/" style="font-size: 1.05rem;">git<sup>1</sup></a><a href="/tags/overleaf/" style="font-size: 1.05rem;">overleaf<sup>2</sup></a><a href="/tags/pip/" style="font-size: 1.05rem;">pip<sup>1</sup></a><a href="/tags/sci%E6%8A%95%E7%A8%BF/" style="font-size: 1.05rem;">sciæŠ•ç¨¿<sup>1</sup></a><a href="/tags/tensor/" style="font-size: 1.05rem;">tensor<sup>2</sup></a><a href="/tags/tree-sitter/" style="font-size: 1.05rem;">tree-sitter<sup>1</sup></a><a href="/tags/%E4%BB%A3%E7%A0%81%E8%A1%8C%E7%BA%A7%E6%A3%80%E6%B5%8B/" style="font-size: 1.05rem;">ä»£ç è¡Œçº§æ£€æµ‹<sup>1</sup></a><a href="/tags/%E5%9F%BA%E6%9C%AC%E6%9C%AF%E8%AF%AD/" style="font-size: 1.05rem;">åŸºæœ¬æœ¯è¯­<sup>1</sup></a><a href="/tags/%E5%AD%A6%E4%B9%A0%E7%8E%87/" style="font-size: 1.05rem;">å­¦ä¹ ç‡<sup>1</sup></a><a href="/tags/%E5%AE%A1%E7%A8%BF/" style="font-size: 1.05rem;">å®¡ç¨¿<sup>1</sup></a><a href="/tags/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/" style="font-size: 1.05rem;">æ¼æ´åˆ†æ<sup>1</sup></a><a href="/tags/%E7%8E%AF%E5%A2%83/" style="font-size: 1.05rem;">ç¯å¢ƒ<sup>2</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90/" style="font-size: 1.05rem;">è½¯ä»¶åˆ†æ<sup>5</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8/" style="font-size: 1.05rem;">è½¯ä»¶å®‰å…¨<sup>23</sup></a><a href="/tags/%E8%BF%87%E7%A8%8B%E9%97%B4%E5%88%86%E6%9E%90/" style="font-size: 1.05rem;">è¿‡ç¨‹é—´åˆ†æ<sup>1</sup></a><a href="/tags/%E9%9D%99%E6%80%81%E5%88%86%E6%9E%90/" style="font-size: 1.05rem;">é™æ€åˆ†æ<sup>2</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>æ–‡ç« </span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>å½’æ¡£</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">å››æœˆ 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">åäºŒæœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">48</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">åäºŒæœˆ 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>ç¯‡</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="è¾¹æ æ˜¾ç¤ºæ§åˆ¶"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="éŸ³ä¹å¼€å…³"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="åˆ‡æ¢"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">åŸåˆ›</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Pytorch/" itemprop="url">Pytorch</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Pytorch/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Pytorch</span></a><a class="article-meta__tags" href="/tags/tensor/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>tensor</span></a></span></div></div><h1 class="post-title" itemprop="name headline">torch tensoræ“ä½œ</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-12-19T03:30:36.000Z" title="å‘è¡¨äº 2023-12-19 11:30:36">2023-12-19</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-12-19T08:28:29.268Z" title="æ›´æ–°äº 2023-12-19 16:28:29">2023-12-19</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="torch tensoræ“ä½œ"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="é˜…è¯»é‡">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="ä½œè€…IPå±åœ°ä¸ºæ²³åŒ—ç§¦çš‡å²›"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>æ²³åŒ—ç§¦çš‡å²›</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">è¯„è®ºæ•°:</span><a href="/2023/12/19/AILearning/pytorch/tensor%E6%93%8D%E4%BD%9C/#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/home.jpg"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://foresta-yang.github.io/2023/12/19/AILearning/pytorch/tensor%E6%93%8D%E4%BD%9C/"><header><a class="post-meta-categories" href="/categories/Pytorch/" itemprop="url">Pytorch</a><a href="/tags/Pytorch/" tabindex="-1" itemprop="url">Pytorch</a><a href="/tags/tensor/" tabindex="-1" itemprop="url">tensor</a><h1 id="CrawlerTitle" itemprop="name headline">torch tensoræ“ä½œ</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">foresta.yang</span><time itemprop="dateCreated datePublished" datetime="2023-12-19T03:30:36.000Z" title="å‘è¡¨äº 2023-12-19 11:30:36">2023-12-19</time><time itemprop="dateCreated datePublished" datetime="2023-12-19T08:28:29.268Z" title="æ›´æ–°äº 2023-12-19 16:28:29">2023-12-19</time></header><h1 id="ä¸€-å¼ é‡çš„åŸºæœ¬æ“ä½œ"><a class="markdownIt-Anchor" href="#ä¸€-å¼ é‡çš„åŸºæœ¬æ“ä½œ"></a> ä¸€ã€å¼ é‡çš„åŸºæœ¬æ“ä½œ</h1>
<p>Pytorch ä¸­ï¼Œå¼ é‡çš„æ“ä½œåˆ†ä¸º<strong>ç»“æ„æ“ä½œå’Œæ•°å­¦è¿ç®—</strong>ï¼Œå…¶ç†è§£å°±å¦‚å­—é¢æ„æ€ã€‚ç»“æ„æ“ä½œå°±æ˜¯æ”¹å˜å¼ é‡æœ¬èº«çš„ç»“æ„ï¼Œæ•°å­¦è¿ç®—å°±æ˜¯å¯¹å¼ é‡çš„å…ƒç´ å€¼å®Œæˆæ•°å­¦è¿ç®—ã€‚</p>
<ul>
<li>å¸¸ä½¿ç”¨çš„å¼ é‡ç»“æ„æ“ä½œï¼šç»´åº¦å˜æ¢ï¼ˆtranposeã€view ç­‰ï¼‰ã€åˆå¹¶åˆ†å‰²ï¼ˆsplitã€chunkç­‰ï¼‰ã€ç´¢å¼•åˆ‡ç‰‡ï¼ˆindex_selectã€gather ç­‰ï¼‰ã€‚</li>
<li>å¸¸ä½¿ç”¨çš„å¼ é‡æ•°å­¦è¿ç®—ï¼šæ ‡é‡è¿ç®—ã€å‘é‡è¿ç®—ã€çŸ©é˜µè¿ç®—ã€‚</li>
</ul>
<h1 id="äºŒ-ç»´åº¦å˜æ¢"><a class="markdownIt-Anchor" href="#äºŒ-ç»´åº¦å˜æ¢"></a> äºŒã€ç»´åº¦å˜æ¢</h1>
<h2 id="21-squeeze-vs-unsqueeze-ç»´åº¦å¢å‡"><a class="markdownIt-Anchor" href="#21-squeeze-vs-unsqueeze-ç»´åº¦å¢å‡"></a> <strong>2.1 squeeze vs unsqueeze ç»´åº¦å¢å‡</strong></h2>
<ul>
<li><strong>squeeze()</strong>ï¼šå¯¹ tensor è¿›è¡Œç»´åº¦çš„å‹ç¼©ï¼Œå»æ‰ç»´æ•°ä¸º 1 çš„ç»´åº¦ã€‚ç”¨æ³•ï¼štorch.squeeze(a) å°† a ä¸­æ‰€æœ‰ä¸º 1 çš„ç»´åº¦éƒ½åˆ é™¤ï¼Œæˆ–è€… a.squeeze(1) æ˜¯å»æ‰ aä¸­æŒ‡å®šçš„ç»´æ•°ä¸º 1 çš„ç»´åº¦ã€‚</li>
<li><strong>unsqueeze()</strong>ï¼šå¯¹æ•°æ®ç»´åº¦è¿›è¡Œæ‰©å……ï¼Œç»™æŒ‡å®šä½ç½®åŠ ä¸Šç»´æ•°ä¸º 1 çš„ç»´åº¦ã€‚ç”¨æ³•ï¼štorch.unsqueeze(a, N)ï¼Œæˆ–è€… a.unsqueeze(N)ï¼Œåœ¨ a ä¸­æŒ‡å®šä½ç½® N åŠ ä¸Šä¸€ä¸ªç»´æ•°ä¸º 1 çš„ç»´åº¦ã€‚</li>
</ul>
<p>squeeze ç”¨ä¾‹ç¨‹åºå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = torch.rand(<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line">b = torch.squeeze(a)</span><br><span class="line">c = a.squeeze(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(b.shape)</span><br><span class="line"><span class="built_in">print</span>(c.shape)</span><br></pre></td></tr></table></figure>
<p>ç¨‹åºè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<blockquote>
<p>torch.Size([3, 3]) torch.Size([1, 3, 3])</p>
</blockquote>
<p>unsqueeze ç”¨ä¾‹ç¨‹åºå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = torch.rand(<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line">y1 = torch.unsqueeze(x, <span class="number">0</span>)</span><br><span class="line">y2 = x.unsqueeze(<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(y1.shape)</span><br><span class="line"><span class="built_in">print</span>(y2.shape)</span><br></pre></td></tr></table></figure>
<p>ç¨‹åºè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<blockquote>
<p>torch.Size([1, 3, 3]) torch.Size([1, 3, 3])</p>
</blockquote>
<h2 id="22-transpose-vs-permute-ç»´åº¦äº¤æ¢"><a class="markdownIt-Anchor" href="#22-transpose-vs-permute-ç»´åº¦äº¤æ¢"></a> <strong>2.2 transpose vs permute ç»´åº¦äº¤æ¢</strong></h2>
<p>torch.transpose() åªèƒ½äº¤æ¢ä¸¤ä¸ªç»´åº¦ï¼Œè€Œ .permute() å¯ä»¥è‡ªç”±äº¤æ¢ä»»æ„ä½ç½®ã€‚å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>transpose(dim0, dim1) â†’ Tensor # See torch.transpose()</li>
<li>permute(*dims) â†’ Tensor # dim(int). Returns a view of the original tensor with its dimensions permuted.</li>
</ul>
<p>åœ¨ CNN æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°äº¤æ¢ç»´åº¦çš„é—®é¢˜ï¼Œä¸¾ä¾‹ï¼šå››ä¸ªç»´åº¦è¡¨ç¤ºçš„ tensorï¼š[batch, channel, h, w]ï¼ˆnchwï¼‰ï¼Œå¦‚æœæƒ³æŠŠ channel æ”¾åˆ°æœ€åå»ï¼Œå½¢æˆ[batch, h, w, channel]ï¼ˆnhwcï¼‰ï¼Œå¦‚æœä½¿ç”¨ torch.transpose() æ–¹æ³•ï¼Œè‡³å°‘è¦äº¤æ¢ä¸¤æ¬¡ï¼ˆå…ˆ 1 3 äº¤æ¢å† 1 2 äº¤æ¢ï¼‰ï¼Œè€Œä½¿ç”¨ .permute() æ–¹æ³•åªéœ€ä¸€æ¬¡æ“ä½œï¼Œæ›´åŠ æ–¹ä¾¿ã€‚ä¾‹å­ç¨‹åºå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">b = torch.rand(<span class="number">1</span>,<span class="number">3</span>,<span class="number">28</span>,<span class="number">32</span>)</span><br><span class="line"><span class="comment"># torch.Size([1, 3, 28, 32]</span></span><br><span class="line"><span class="built_in">print</span>(b.transpose(<span class="number">1</span>, <span class="number">3</span>).shape)</span><br><span class="line"><span class="comment"># torch.Size([1, 32, 28, 3])</span></span><br><span class="line"><span class="built_in">print</span>(b.transpose(<span class="number">1</span>, <span class="number">3</span>).transpose(<span class="number">1</span>, <span class="number">2</span>).shape)</span><br><span class="line"><span class="comment"># torch.Size([1, 28, 32, 3])</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(b.permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>).shape)</span><br><span class="line"><span class="comment"># torch.Size([1, 28, 32, 3]</span></span><br></pre></td></tr></table></figure>
<h2 id="23-reshape-vs-view"><a class="markdownIt-Anchor" href="#23-reshape-vs-view"></a> <strong>2.3 reshape vs view</strong></h2>
<blockquote>
<p>viewåªé€‚åˆå¯¹æ»¡è¶³è¿ç»­æ€§æ¡ä»¶ï¼ˆcontiguousï¼‰çš„tensorè¿›è¡Œæ“ä½œï¼Œè€ŒreshapeåŒæ—¶è¿˜å¯ä»¥å¯¹ä¸æ»¡è¶³è¿ç»­æ€§æ¡ä»¶çš„tensorè¿›è¡Œæ“ä½œï¼Œå…·æœ‰æ›´å¥½çš„é²æ£’æ€§ã€‚viewèƒ½å¹²çš„reshapeéƒ½èƒ½å¹²ï¼Œå¦‚æœviewä¸èƒ½å¹²å°±å¯ä»¥ç”¨reshapeæ¥å¤„ç†ã€‚æ›´å¤šå¯çœ‹[1]</p>
</blockquote>
<h2 id="24-einsum"><a class="markdownIt-Anchor" href="#24-einsum"></a> <strong>2.4 einsum</strong></h2>
<p>é¦–å…ˆçœ‹ä¸‹ einsum å®ç°çŸ©é˜µä¹˜æ³•çš„ä¾‹å­ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = torch.rand(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">b = torch.rand(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="comment"># è¯­ä¹‰è§£æï¼š</span></span><br><span class="line"><span class="comment"># è¾“å…¥aï¼š2é˜¶å¼ é‡ï¼Œä¸‹æ ‡ä¸ºik</span></span><br><span class="line"><span class="comment"># è¾“å…¥b: 2é˜¶å¼ é‡ï¼Œä¸‹æ ‡ä¸ºkj</span></span><br><span class="line"><span class="comment"># è¾“å‡ºo: 2é˜¶å¼ é‡ï¼Œä¸‹æ ‡ä¸ºiå’Œj</span></span><br><span class="line">c = torch.einsum(<span class="string">&quot;ik,kj-&gt;ij&quot;</span>, [a, b])</span><br><span class="line"><span class="comment"># ç­‰ä»·æ“ä½œ torch.mm(a, b)</span></span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">60.</span>).reshape(<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">b = np.arange(<span class="number">24.</span>).reshape(<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># è¯­ä¹‰è§£æï¼š</span></span><br><span class="line"><span class="comment"># è¾“å…¥aï¼š3é˜¶å¼ é‡ï¼Œä¸‹æ ‡ä¸ºijk</span></span><br><span class="line"><span class="comment"># è¾“å…¥b: 3é˜¶å¼ é‡ï¼Œä¸‹æ ‡ä¸ºjil</span></span><br><span class="line"><span class="comment"># è¾“å‡ºo: 2é˜¶å¼ é‡ï¼Œä¸‹æ ‡ä¸ºkå’Œl</span></span><br><span class="line">c = np.einsum(<span class="string">&#x27;ijk,jil-&gt;kl&#x27;</span>, a, b)</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•å¯ä»¥å®ç°çŸ©é˜µä¹˜æ³•ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ç”¨æ¥æ›´æ¢ç»´åº¦</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¯­ä¹‰è§£æ:</span></span><br><span class="line"><span class="comment"># å½“åé¢åªæœ‰ä¸€ä¸ªå¼ é‡æ—¶ï¼Œå°±æ˜¯å¯¹è‡ªå·±ç»´åº¦è¿›è¡Œå˜æ¢</span></span><br><span class="line"><span class="comment"># æ¯”è¾ƒå¸¸ç”¨çš„å°±æ˜¯å°†chanelæ¢åˆ°æœ€å</span></span><br><span class="line">x = torch.einsum(<span class="string">&#x27;nchw-&gt;nhwc&#x27;</span>, x)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ›´å¤šå¯çœ‹[2]</p>
</blockquote>
<h1 id="ä¸‰-ç´¢å¼•åˆ‡ç‰‡"><a class="markdownIt-Anchor" href="#ä¸‰-ç´¢å¼•åˆ‡ç‰‡"></a> ä¸‰ã€ç´¢å¼•åˆ‡ç‰‡</h1>
<h2 id="31-è§„åˆ™ç´¢å¼•åˆ‡ç‰‡æ–¹å¼"><a class="markdownIt-Anchor" href="#31-è§„åˆ™ç´¢å¼•åˆ‡ç‰‡æ–¹å¼"></a> <strong>3.1 è§„åˆ™ç´¢å¼•åˆ‡ç‰‡æ–¹å¼</strong></h2>
<p>å¼ é‡çš„ç´¢å¼•åˆ‡ç‰‡æ–¹å¼å’Œ numpyã€python å¤šç»´åˆ—è¡¨å‡ ä¹ä¸€è‡´ï¼Œéƒ½å¯ä»¥é€šè¿‡ç´¢å¼•å’Œåˆ‡ç‰‡å¯¹éƒ¨åˆ†å…ƒç´ è¿›è¡Œä¿®æ”¹ã€‚åˆ‡ç‰‡æ—¶æ”¯æŒç¼ºçœå‚æ•°å’Œçœç•¥å·ã€‚å®ä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>t = torch.randint(<span class="number">1</span>,<span class="number">10</span>,[<span class="number">3</span>,<span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t</span><br><span class="line">tensor([[<span class="number">8</span>, <span class="number">2</span>, <span class="number">9</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">5</span>, <span class="number">9</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">9</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t[<span class="number">0</span>] <span class="comment"># ç¬¬ 1 è¡Œæ•°æ®</span></span><br><span class="line">tensor([<span class="number">8</span>, <span class="number">2</span>, <span class="number">9</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t[<span class="number">2</span>][<span class="number">2</span>]</span><br><span class="line">tensor(<span class="number">9</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t[<span class="number">0</span>:<span class="number">3</span>,:]  <span class="comment"># ç¬¬1è‡³ç¬¬3è¡Œï¼Œå…¨éƒ¨åˆ—</span></span><br><span class="line">tensor([[<span class="number">8</span>, <span class="number">2</span>, <span class="number">9</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">5</span>, <span class="number">9</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">9</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t[<span class="number">0</span>:<span class="number">2</span>,:]  <span class="comment"># ç¬¬1è¡Œè‡³ç¬¬2è¡Œ</span></span><br><span class="line">tensor([[<span class="number">8</span>, <span class="number">2</span>, <span class="number">9</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">5</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t[<span class="number">1</span>:,-<span class="number">1</span>]  <span class="comment"># ç¬¬2è¡Œè‡³æœ€åè¡Œï¼Œæœ€åä¸€åˆ—</span></span><br><span class="line">tensor([<span class="number">9</span>, <span class="number">9</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t[<span class="number">1</span>:,::<span class="number">2</span>] <span class="comment"># ç¬¬1è¡Œè‡³æœ€åè¡Œï¼Œç¬¬0åˆ—åˆ°æœ€åä¸€åˆ—æ¯éš”ä¸¤åˆ—å–ä¸€åˆ—</span></span><br><span class="line">tensor([[<span class="number">2</span>, <span class="number">9</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">9</span>]])</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šåˆ‡ç‰‡æ–¹å¼ç›¸å¯¹è§„åˆ™ï¼Œå¯¹äºä¸è§„åˆ™çš„åˆ‡ç‰‡æå–,å¯ä»¥ä½¿ç”¨ torch.index_select, torch.take, torch.gather, torch.masked_selectã€‚</p>
<h2 id="32-gather-å’Œ-torchindex_select-ç®—å­"><a class="markdownIt-Anchor" href="#32-gather-å’Œ-torchindex_select-ç®—å­"></a> <strong>3.2 gather å’Œ torch.index_select ç®—å­</strong></h2>
<blockquote>
<p>gather ç®—å­çš„ç”¨æ³•æ¯”è¾ƒéš¾ä»¥ç†è§£ï¼Œåœ¨ç¿»é˜…äº†å®˜æ–¹æ–‡æ¡£å’Œç½‘ä¸Šèµ„æ–™åï¼Œæˆ‘æœ‰äº†ä¸€äº›è‡ªå·±çš„ç†è§£ã€‚</p>
</blockquote>
<p>1ï¼Œgather æ˜¯ä¸è§„åˆ™çš„åˆ‡ç‰‡æå–ç®—å­ï¼ˆGathers values along an axis specified by dim. åœ¨æŒ‡å®šç»´åº¦ä¸Šæ ¹æ®ç´¢å¼• index æ¥é€‰å–æ•°æ®ï¼‰ã€‚å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">torch.gather(<span class="built_in">input</span>, dim, index, *, sparse_grad=<span class="literal">False</span>, out=<span class="literal">None</span>) â†’ Tensor</span><br></pre></td></tr></table></figure>
<p><strong>å‚æ•°è§£é‡Šï¼š</strong></p>
<ul>
<li>input (Tensor) â€“ the source tensor.</li>
<li>dim (int) â€“ the axis along which to index.</li>
<li>index (LongTensor) â€“ the indices of elements to gather.</li>
</ul>
<p>å¯¹äº 3D tensorï¼Œoutput å€¼çš„å®šä¹‰å¦‚ä¸‹ï¼š gather çš„å®˜æ–¹å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">out[i][j][k] = <span class="built_in">input</span>[index[i][j][k]][j][k]  <span class="comment"># if dim == 0</span></span><br><span class="line">out[i][j][k] = <span class="built_in">input</span>[i][index[i][j][k]][k]  <span class="comment"># if dim == 1</span></span><br><span class="line">out[i][j][k] = <span class="built_in">input</span>[i][j][index[i][j][k]]   <span class="comment"># if dim == 2</span></span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢ç»“åˆ 2D å’Œ 3D tensor çš„ç”¨ä¾‹æ¥ç›´è§‚ç†è§£ç®—å­ç”¨æ³•ã€‚<br />
ï¼ˆ1ï¼‰å¯¹äº 2D tensor çš„ä¾‹å­ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> torch</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = torch.arange(<span class="number">0</span>, <span class="number">16</span>).view(<span class="number">4</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">tensor([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">        [<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>index = torch.tensor([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]])  <span class="comment"># é€‰å–å¯¹è§’çº¿å…ƒç´ </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>torch.gather(a, <span class="number">0</span>, index)</span><br><span class="line">tensor([[ <span class="number">0</span>,  <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>]])</span><br></pre></td></tr></table></figure>
<p>output å€¼å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŒ‰ç…§ index = tensor([[0, 1, 2, 3]])é¡ºåºä½œç”¨åœ¨è¡Œä¸Šç´¢å¼•ä¾æ¬¡ä¸º0,1,2,3</span></span><br><span class="line">a[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">a[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">5</span></span><br><span class="line">a[<span class="number">2</span>][<span class="number">2</span>] = <span class="number">10</span></span><br><span class="line">a[<span class="number">3</span>][<span class="number">3</span>] = <span class="number">15</span></span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰ç´¢å¼•æ›´å¤æ‚çš„ 2D tensor ä¾‹å­ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>t = torch.tensor([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t</span><br><span class="line">tensor([[<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>torch.gather(t, <span class="number">1</span>, torch.tensor([[<span class="number">0</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">0</span>]]))</span><br><span class="line">tensor([[ <span class="number">1</span>,  <span class="number">1</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">3</span>]])</span><br></pre></td></tr></table></figure>
<p>output å€¼çš„è®¡ç®—å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">output[i][j] = <span class="built_in">input</span>[i][index[i][j]]  <span class="comment"># if dim = 1</span></span><br><span class="line">output[<span class="number">0</span>][<span class="number">0</span>] = <span class="built_in">input</span>[<span class="number">0</span>][index[<span class="number">0</span>][<span class="number">0</span>]] = <span class="built_in">input</span>[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">output[<span class="number">0</span>][<span class="number">1</span>] = <span class="built_in">input</span>[<span class="number">0</span>][index[<span class="number">0</span>][<span class="number">1</span>]] = <span class="built_in">input</span>[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">output[<span class="number">1</span>][<span class="number">0</span>] = <span class="built_in">input</span>[<span class="number">1</span>][index[<span class="number">1</span>][<span class="number">0</span>]] = <span class="built_in">input</span>[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">4</span></span><br><span class="line">output[<span class="number">1</span>][<span class="number">1</span>] = <span class="built_in">input</span>[<span class="number">1</span>][index[<span class="number">1</span>][<span class="number">1</span>]] = <span class="built_in">input</span>[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>æ€»ç»“ï¼š<strong>å¯ä»¥çœ‹åˆ° gather æ˜¯é€šè¿‡å°†ç´¢å¼•åœ¨æŒ‡å®šç»´åº¦ dim ä¸Šçš„å€¼æ›¿æ¢ä¸º index çš„å€¼ï¼Œä½†æ˜¯å…¶ä»–ç»´åº¦ç´¢å¼•ä¸å˜çš„æƒ…å†µä¸‹è·å– tensor æ•°æ®</strong>ã€‚ç›´è§‚ä¸Šå¯ä»¥ç†è§£ä¸ºå¯¹çŸ©é˜µè¿›è¡Œé‡æ’ï¼Œæ¯”å¦‚å¯¹æ¯ä¸€è¡Œ(dim=1)çš„å…ƒç´ è¿›è¡Œå˜æ¢ï¼Œæ¯”å¦‚ torch.gather(a, 1, torch.tensor([[1,2,0], [1,2,0]])) çš„ä½œç”¨å°±æ˜¯å¯¹ çŸ©é˜µ a æ¯ä¸€è¡Œçš„å…ƒç´ ï¼Œè¿›è¡Œ permtute(1,2,0) æ“ä½œã€‚</p>
<p>2ï¼Œç†è§£äº† gather å†çœ‹ index_select å°±å¾ˆç®€å•ï¼Œå‡½æ•°ä½œç”¨æ˜¯è¿”å›æ²¿ç€è¾“å…¥å¼ é‡çš„æŒ‡å®šç»´åº¦çš„æŒ‡å®šç´¢å¼•å·è¿›è¡Œç´¢å¼•çš„å¼ é‡å­é›†ã€‚å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">torch.index_select(<span class="built_in">input</span>, dim, index, *, out=<span class="literal">None</span>) â†’ Tensor</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°è¿”å›ä¸€ä¸ªæ–°çš„å¼ é‡ï¼Œå®ƒä½¿ç”¨æ•°æ®ç±»å‹ä¸º LongTensor çš„ index ä¸­çš„æ¡ç›®æ²¿ç»´åº¦ dim ç´¢å¼•è¾“å…¥å¼ é‡ã€‚è¿”å›çš„å¼ é‡å…·æœ‰ä¸åŸå§‹å¼ é‡ï¼ˆè¾“å…¥ï¼‰ç›¸åŒçš„ç»´æ•°ã€‚ ç»´åº¦å°ºå¯¸ä¸ç´¢å¼•é•¿åº¦ç›¸åŒï¼› å…¶ä»–å°ºå¯¸ä¸åŸå§‹å¼ é‡ä¸­çš„å°ºå¯¸ç›¸åŒã€‚å®ä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = torch.randn(<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">tensor([[ <span class="number">0.1427</span>,  <span class="number">0.0231</span>, -<span class="number">0.5414</span>, -<span class="number">1.0009</span>],</span><br><span class="line">        [-<span class="number">0.4664</span>,  <span class="number">0.2647</span>, -<span class="number">0.1228</span>, -<span class="number">1.1068</span>],</span><br><span class="line">        [-<span class="number">1.1734</span>, -<span class="number">0.6571</span>,  <span class="number">0.7230</span>, -<span class="number">0.6004</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>indices = torch.tensor([<span class="number">0</span>, <span class="number">2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>torch.index_select(x, <span class="number">0</span>, indices)</span><br><span class="line">tensor([[ <span class="number">0.1427</span>,  <span class="number">0.0231</span>, -<span class="number">0.5414</span>, -<span class="number">1.0009</span>],</span><br><span class="line">        [-<span class="number">1.1734</span>, -<span class="number">0.6571</span>,  <span class="number">0.7230</span>, -<span class="number">0.6004</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>torch.index_select(x, <span class="number">1</span>, indices)</span><br><span class="line">tensor([[ <span class="number">0.1427</span>, -<span class="number">0.5414</span>],</span><br><span class="line">        [-<span class="number">0.4664</span>, -<span class="number">0.1228</span>],</span><br><span class="line">        [-<span class="number">1.1734</span>,  <span class="number">0.7230</span>]])</span><br></pre></td></tr></table></figure>
<h1 id="å››-åˆå¹¶åˆ†å‰²"><a class="markdownIt-Anchor" href="#å››-åˆå¹¶åˆ†å‰²"></a> å››ã€åˆå¹¶åˆ†å‰²</h1>
<h2 id="41-torchcat-å’Œ-torchstack"><a class="markdownIt-Anchor" href="#41-torchcat-å’Œ-torchstack"></a> <strong>4.1 torch.cat å’Œ torch.stack</strong></h2>
<p>å¯ä»¥ç”¨ torch.cat æ–¹æ³•å’Œ torch.stack æ–¹æ³•å°†å¤šä¸ªå¼ é‡åˆå¹¶ï¼Œä¹Ÿå¯ä»¥ç”¨ torch.splitæ–¹æ³•æŠŠä¸€ä¸ªå¼ é‡åˆ†å‰²æˆå¤šä¸ªå¼ é‡ã€‚torch.cat å’Œ torch.stack æœ‰ç•¥å¾®çš„åŒºåˆ«ï¼Œtorch.cat æ˜¯è¿æ¥ï¼Œä¸ä¼šå¢åŠ ç»´åº¦ï¼Œè€Œ torch.stack æ˜¯å †å ï¼Œä¼šå¢åŠ ä¸€ä¸ªç»´åº¦ã€‚ä¸¤è€…å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Concatenates the given sequence of seq tensors in the given dimension. All tensors must either have the same shape (except in the concatenating dimension) or be empty.</span></span><br><span class="line">torch.cat(tensors, dim=<span class="number">0</span>, *, out=<span class="literal">None</span>) â†’ Tensor</span><br><span class="line"><span class="comment"># Concatenates a sequence of tensors along **a new** dimension. All tensors need to be of the same size.</span></span><br><span class="line">torch.stack(tensors, dim=<span class="number">0</span>, *, out=<span class="literal">None</span>) â†’ Tensor</span><br></pre></td></tr></table></figure>
<p>torch.cat å’Œ torch.stack ç”¨æ³•å®ä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = torch.arange(<span class="number">0</span>,<span class="number">9</span>).view(<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = torch.arange(<span class="number">10</span>,<span class="number">19</span>).view(<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = torch.arange(<span class="number">20</span>,<span class="number">29</span>).view(<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cat_abc = torch.cat([a,b,c], dim=<span class="number">0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(cat_abc.shape)</span><br><span class="line">torch.Size([<span class="number">9</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(cat_abc)</span><br><span class="line">tensor([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line">        [ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">        [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>],</span><br><span class="line">        [<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>],</span><br><span class="line">        [<span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>],</span><br><span class="line">        [<span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>stack_abc = torch.stack([a,b,c], axis=<span class="number">0</span>)  <span class="comment"># torchä¸­dimå’Œaxiså‚æ•°åå¯ä»¥æ··ç”¨</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(stack_abc.shape)</span><br><span class="line">torch.Size([<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(stack_abc)</span><br><span class="line">tensor([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">         [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line">         [ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>],</span><br><span class="line">         [<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">         [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>],</span><br><span class="line">         [<span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>],</span><br><span class="line">         [<span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>chunk_abc = torch.chunk(cat_abc, <span class="number">3</span>, dim=<span class="number">0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>chunk_abc</span><br><span class="line">(tensor([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">         [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">         [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]]),</span><br><span class="line"> tensor([[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>],</span><br><span class="line">         [<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">         [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>]]),</span><br><span class="line"> tensor([[<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>],</span><br><span class="line">         [<span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>],</span><br><span class="line">         [<span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>]]))</span><br></pre></td></tr></table></figure>
<h2 id="42-torchsplit-å’Œ-torchchunk"><a class="markdownIt-Anchor" href="#42-torchsplit-å’Œ-torchchunk"></a> <strong>4.2 torch.split å’Œ torch.chunk</strong></h2>
<p>torch.split() å’Œ torch.chunk() å¯ä»¥çœ‹ä½œæ˜¯ torch.cat() çš„é€†è¿ç®—ã€‚split() ä½œç”¨æ˜¯å°†å¼ é‡æ‹†åˆ†ä¸ºå¤šä¸ªå—ï¼Œæ¯ä¸ªå—éƒ½æ˜¯åŸå§‹å¼ é‡çš„è§†å›¾ã€‚split() å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Splits the tensor into chunks. Each chunk is a view of the original tensor.</span></span><br><span class="line"><span class="string">If split_size_or_sections is an integer type, then tensor will be split into equally sized chunks (if possible). Last chunk will be smaller if the tensor size along the given dimension dim is not divisible by split_size.</span></span><br><span class="line"><span class="string">If split_size_or_sections is a list, then tensor will be split into len(split_size_or_sections) chunks with sizes in dim according to split_size_or_sections.</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">torch.split(tensor, split_size_or_sections, dim=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>chunk() ä½œç”¨æ˜¯å°† tensor æŒ‰ dimï¼ˆè¡Œæˆ–åˆ—ï¼‰åˆ†å‰²æˆ chunks ä¸ª tensor å—ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå…ƒç»„ã€‚chunk() å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">torch.chunk(<span class="built_in">input</span>, chunks, dim=<span class="number">0</span>) â†’ <span class="type">List</span> of Tensors</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Splits a tensor into a specific number of chunks. Each chunk is a view of the input tensor.</span></span><br><span class="line"><span class="string">Last chunk will be smaller if the tensor size along the given dimension dim is not divisible by chunks.</span></span><br><span class="line"><span class="string">Parameters:</span></span><br><span class="line"><span class="string">    input (Tensor) â€“ the tensor to split</span></span><br><span class="line"><span class="string">    chunks (int) â€“ number of chunks to return</span></span><br><span class="line"><span class="string">    dim (int) â€“ dimension along which to split the tensor</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<p>å®ä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = torch.arange(<span class="number">10</span>).reshape(<span class="number">5</span>,<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">tensor([[<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">        [<span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">        [<span class="number">6</span>, <span class="number">7</span>],</span><br><span class="line">        [<span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>torch.split(a, <span class="number">2</span>)</span><br><span class="line">(tensor([[<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">         [<span class="number">2</span>, <span class="number">3</span>]]),</span><br><span class="line"> tensor([[<span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">          [<span class="number">6</span>, <span class="number">7</span>]]),</span><br><span class="line"> tensor([[<span class="number">8</span>, <span class="number">9</span>]]))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>torch.split(a, [<span class="number">1</span>,<span class="number">4</span>])</span><br><span class="line">(tensor([[<span class="number">0</span>, <span class="number">1</span>]]),</span><br><span class="line"> tensor([[<span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">         [<span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">         [<span class="number">6</span>, <span class="number">7</span>],</span><br><span class="line">         [<span class="number">8</span>, <span class="number">9</span>]]))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>torch.chunk(a, <span class="number">2</span>, dim=<span class="number">1</span>)</span><br><span class="line">(tensor([[<span class="number">0</span>],</span><br><span class="line">        [<span class="number">2</span>],</span><br><span class="line">        [<span class="number">4</span>],</span><br><span class="line">        [<span class="number">6</span>],</span><br><span class="line">        [<span class="number">8</span>]]), </span><br><span class="line">tensor([[<span class="number">1</span>],</span><br><span class="line">        [<span class="number">3</span>],</span><br><span class="line">        [<span class="number">5</span>],</span><br><span class="line">        [<span class="number">7</span>],</span><br><span class="line">        [<span class="number">9</span>]]))</span><br></pre></td></tr></table></figure>
<h1 id="äº”-å·ç§¯ç›¸å…³ç®—å­"><a class="markdownIt-Anchor" href="#äº”-å·ç§¯ç›¸å…³ç®—å­"></a> äº”ã€å·ç§¯ç›¸å…³ç®—å­</h1>
<h2 id="51-ä¸Šé‡‡æ ·æ–¹æ³•æ€»ç»“"><a class="markdownIt-Anchor" href="#51-ä¸Šé‡‡æ ·æ–¹æ³•æ€»ç»“"></a> <strong>5.1 ä¸Šé‡‡æ ·æ–¹æ³•æ€»ç»“</strong></h2>
<p>ä¸Šé‡‡æ ·å¤§è‡´è¢«æ€»ç»“æˆäº†ä¸‰ä¸ªç±»åˆ«ï¼š</p>
<ol>
<li>åŸºäºçº¿æ€§æ’å€¼çš„ä¸Šé‡‡æ ·ï¼šæœ€è¿‘é‚»ç®—æ³•ï¼ˆnearestï¼‰ã€åŒçº¿æ€§æ’å€¼ç®—æ³•ï¼ˆbilinearï¼‰ã€åŒä¸‰æ¬¡æ’å€¼ç®—æ³•ï¼ˆbicubicï¼‰ç­‰ï¼Œè¿™æ˜¯ä¼ ç»Ÿå›¾åƒå¤„ç†æ–¹æ³•ã€‚</li>
<li>åŸºäºæ·±åº¦å­¦ä¹ çš„ä¸Šé‡‡æ ·ï¼ˆè½¬ç½®å·ç§¯ï¼Œä¹Ÿå«åå·ç§¯ Conv2dTranspose2dç­‰ï¼‰</li>
<li>Unpooling çš„æ–¹æ³•ï¼ˆç®€å•çš„è¡¥é›¶æˆ–è€…æ‰©å……æ“ä½œï¼‰<br />
è®¡ç®—æ•ˆæœï¼šæœ€è¿‘é‚»æ’å€¼ç®—æ³• &lt; åŒçº¿æ€§æ’å€¼ &lt; åŒä¸‰æ¬¡æ’å€¼ã€‚è®¡ç®—é€Ÿåº¦ï¼šæœ€è¿‘é‚»æ’å€¼ç®—æ³• &gt; åŒçº¿æ€§æ’å€¼ &gt; åŒä¸‰æ¬¡æ’å€¼ã€‚</li>
</ol>
<h2 id="52-finterpolate-é‡‡æ ·å‡½æ•°"><a class="markdownIt-Anchor" href="#52-finterpolate-é‡‡æ ·å‡½æ•°"></a> <strong>5.2 F.interpolate é‡‡æ ·å‡½æ•°</strong></h2>
<blockquote>
<p>Pytorch è€ç‰ˆæœ¬æœ‰ nn.Upsample å‡½æ•°ï¼Œæ–°ç‰ˆæœ¬å»ºè®®ç”¨ torch.nn.functional.interpolateï¼Œä¸€ä¸ªå‡½æ•°å¯å®ç°å®šåˆ¶åŒ–éœ€æ±‚çš„ä¸Šé‡‡æ ·æˆ–è€…ä¸‹é‡‡æ ·åŠŸèƒ½ï¼Œã€‚</p>
</blockquote>
<p>F.interpolate() å‡½æ•°å…¨ç§°æ˜¯ torch.nn.functional.interpolate()ï¼Œå‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">interpolate</span>(<span class="params"><span class="built_in">input</span>, size=<span class="literal">None</span>, scale_factor=<span class="literal">None</span>, mode=<span class="string">&#x27;nearest&#x27;</span>, align_corners=<span class="literal">None</span>, recompute_scale_factor=<span class="literal">None</span></span>):  <span class="comment"># noqa: F811</span></span><br><span class="line">    <span class="comment"># type: (Tensor, <span class="type">Optional</span>[<span class="built_in">int</span>], <span class="type">Optional</span>[<span class="type">List</span>[<span class="built_in">float</span>]], <span class="built_in">str</span>, <span class="type">Optional</span>[<span class="built_in">bool</span>], <span class="type">Optional</span>[<span class="built_in">bool</span>]) -&gt; Tensor</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>å‚æ•°è§£é‡Šå¦‚ä¸‹ï¼š</p>
<ul>
<li>input(Tensor)ï¼šè¾“å…¥å¼ é‡æ•°æ®ï¼›</li>
<li>sizeï¼š è¾“å‡ºçš„å°ºå¯¸ï¼Œæ•°æ®ç±»å‹ä¸º tupleï¼š ([optional D_out], [optional H_out], W_out)ï¼Œå’Œ scale_factor äºŒé€‰ä¸€ï¼›</li>
<li>scale_factorï¼šåœ¨é«˜åº¦ã€å®½åº¦å’Œæ·±åº¦ä¸Šé¢çš„æ”¾å¤§å€æ•°ã€‚æ•°æ®ç±»å‹æ—¢å¯ä»¥æ˜¯ intâ€”â€”è¡¨æ˜é«˜åº¦ã€å®½åº¦ã€æ·±åº¦éƒ½æ‰©å¤§åŒä¸€å€æ•°ï¼›ä¹Ÿå¯æ˜¯tupleâ€”â€”æŒ‡å®šé«˜åº¦ã€å®½åº¦ã€æ·±åº¦ç­‰ç»´åº¦çš„æ‰©å¤§å€æ•°ï¼›</li>
<li>modeï¼š ä¸Šé‡‡æ ·çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬æœ€è¿‘é‚»ï¼ˆnearestï¼‰ï¼Œçº¿æ€§æ’å€¼ï¼ˆlinearï¼‰ï¼ŒåŒçº¿æ€§æ’å€¼ï¼ˆbilinearï¼‰ï¼Œä¸‰æ¬¡çº¿æ€§æ’å€¼ï¼ˆtrilinearï¼‰ï¼Œé»˜è®¤æ˜¯æœ€è¿‘é‚»ï¼ˆnearestï¼‰ï¼›</li>
<li>align_cornersï¼š å¦‚æœè®¾ä¸ºTrueï¼Œè¾“å…¥å›¾åƒå’Œè¾“å‡ºå›¾åƒè§’ç‚¹çš„åƒç´ å°†ä¼šè¢«å¯¹é½ï¼ˆalignedï¼‰ï¼Œè¿™åªåœ¨mode = linear, bilinear, or trilinearæ‰æœ‰æ•ˆï¼Œé»˜è®¤ä¸ºFalseã€‚</li>
</ul>
<p>ä¾‹å­ç¨‹åºå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line">x = torch.rand(<span class="number">1</span>,<span class="number">3</span>,<span class="number">224</span>,<span class="number">224</span>)</span><br><span class="line">y = F.interpolate(x * <span class="number">2</span>, scale_factor=(<span class="number">2</span>, <span class="number">2</span>), mode=<span class="string">&#x27;bilinear&#x27;</span>).squeeze(<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(y.shape)   <span class="comment"># torch.Size([3, 224, 224])</span></span><br></pre></td></tr></table></figure>
<h2 id="53-nnconvtranspose2d-åå·ç§¯"><a class="markdownIt-Anchor" href="#53-nnconvtranspose2d-åå·ç§¯"></a> <strong>5.3 nn.ConvTranspose2d åå·ç§¯</strong></h2>
<p>è½¬ç½®å·ç§¯ï¼ˆæœ‰æ—¶å€™ä¹Ÿç§°ä¸ºåå·ç§¯ï¼Œä¸ªäººè§‰å¾—è¿™ç§å«æ³•ä¸æ˜¯å¾ˆè§„èŒƒï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„å·ç§¯ï¼Œå…ˆ padding æ¥æ‰©å¤§å›¾åƒå°ºå¯¸ï¼Œç´§æ¥ç€è·Ÿæ­£å‘å·ç§¯ä¸€æ ·ï¼Œæ—‹è½¬å·ç§¯æ ¸ 180 åº¦ï¼Œå†è¿›è¡Œå·ç§¯è®¡ç®—ã€‚</p>
<h1 id="å¼•ç”¨"><a class="markdownIt-Anchor" href="#å¼•ç”¨"></a> å¼•ç”¨</h1>
<p>[0] <a target="_blank" rel="noopener" href="http://zhuanlan.zhihu.com/p/">zhuanlan.zhihu.com/p/</a><br />
[1] <a target="_blank" rel="noopener" href="https://blog.csdn.net/Flag_ing/article/details/109129752">https://blog.csdn.net/Flag_ing/article/details/109129752</a><br />
[2] <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/361209187">https://zhuanlan.zhihu.com/p/361209187</a></p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" target="_blank" rel="noopener" href="https://github.com/foresta-yang.github.io" title="å¤´åƒ"><img class="post-copyright__author_img_back" src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://foresta.oss-cn-beijing.aliyuncs.com/imgs/head.jpg" title="å¤´åƒ" alt="å¤´åƒ"><img class="post-copyright__author_img_front" src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://foresta.oss-cn-beijing.aliyuncs.com/imgs/head.jpg" title="å¤´åƒ" alt="å¤´åƒ"></a><div class="post-copyright__author_name">foresta.yang</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®" href="https://foresta-yang.github.io/2023/12/19/AILearning/pytorch/tensor%E6%93%8D%E4%BD%9C/">åŸåˆ›</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://foresta-yang.github.io/2023/12/19/AILearning/pytorch/tensor%E6%93%8D%E4%BD%9C/')">torch tensoræ“ä½œ</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="èµèµä½œè€…"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>æ‰“èµä½œè€…</div><div class="reward-main"><div class="reward-all"><span class="reward-title">æ„Ÿè°¢ä½ èµäºˆæˆ‘å‰è¿›çš„åŠ›é‡</span><ul class="reward-group"><li class="reward-item"><a href="https://foresta.oss-cn-beijing.aliyuncs.com/imgs/wechat.jpg" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://foresta.oss-cn-beijing.aliyuncs.com/imgs/wechat.jpg" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="https://foresta.oss-cn-beijing.aliyuncs.com/imgs/alipay.jpg" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://foresta.oss-cn-beijing.aliyuncs.com/imgs/alipay.jpg" alt="æ”¯ä»˜å®"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">èµèµè€…åå•</div><div class="reward-dec">å› ä¸ºä½ ä»¬çš„æ”¯æŒè®©æˆ‘æ„è¯†åˆ°å†™æ–‡ç« çš„ä»·å€¼ğŸ™</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« "><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://foresta-yang.github.io/2023/12/19/AILearning/pytorch/tensor%E6%93%8D%E4%BD%9C/"></div><div class="reward-dec">ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« </div></div></div></div></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="å¤åˆ¶é“¾æ¥" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://foresta-yang.github.io" target="_blank">foresta</a>ï¼</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Pytorch/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Pytorch<span class="tagsPageCount">6</span></a><a class="post-meta__box__tags" href="/tags/tensor/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>tensor<span class="tagsPageCount">2</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://foresta.oss-cn-beijing.aliyuncs.com/imgs/head.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/12/19/AILearning/pytorch/tensor%E8%AE%A1%E7%AE%97/"><img class="prev-cover" src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://foresta.oss-cn-beijing.aliyuncs.com/images/202312191226420.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">torch tensor è®¡ç®—</div></div></a></div><div class="next-post pull-right"><a href="/2023/12/19/AILearning/pytorch/pytorch/"><img class="next-cover" src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://foresta.oss-cn-beijing.aliyuncs.com/images/202312191226420.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">pytorchå…¥é—¨</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>å–œæ¬¢è¿™ç¯‡æ–‡ç« çš„äººä¹Ÿçœ‹äº†</span></div><div class="relatedPosts-list"><div><a href="/2023/12/19/AILearning/pytorch/tensor%E8%AE%A1%E7%AE%97/" title="torch tensor è®¡ç®—"><img class="cover" src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://foresta.oss-cn-beijing.aliyuncs.com/images/202312191226420.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-12-19</div><div class="title">torch tensor è®¡ç®—</div></div></a></div><div><a href="/2023/12/19/AILearning/pytorch/conv2d/" title="Conv2d"><img class="cover" src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://foresta.oss-cn-beijing.aliyuncs.com/images/202312191226420.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-12-19</div><div class="title">Conv2d</div></div></a></div><div><a href="/2023/12/19/AILearning/pytorch/pytorch/" title="pytorchå…¥é—¨"><img class="cover" src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://foresta.oss-cn-beijing.aliyuncs.com/images/202312191226420.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-12-19</div><div class="title">pytorchå…¥é—¨</div></div></a></div><div><a href="/2023/12/19/AILearning/pytorch/%E5%AD%A6%E4%B9%A0%E7%8E%87%E8%A1%B0%E5%87%8F/" title="Pytorchå­¦ä¹ ç‡è¡°å‡æ–¹æ³•"><img class="cover" src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://foresta.oss-cn-beijing.aliyuncs.com/images/202312191226420.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-12-19</div><div class="title">Pytorchå­¦ä¹ ç‡è¡°å‡æ–¹æ³•</div></div></a></div><div><a href="/2023/12/19/Programmer/python/torch%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85/" title="torchç¯å¢ƒ"><img class="cover" src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://foresta.oss-cn-beijing.aliyuncs.com/images/202312191226420.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-12-19</div><div class="title">torchç¯å¢ƒ</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> è¯„è®º</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">åŒ¿åè¯„è®º</a><a href="/privacy" style="margin-left: 4px">éšç§æ”¿ç­–</a></div><div class="comment-tips" id="comment-tips"><span>âœ… ä½ æ— éœ€åˆ é™¤ç©ºè¡Œï¼Œç›´æ¥è¯„è®ºä»¥è·å–æœ€ä½³å±•ç¤ºæ•ˆæœ</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://foresta.oss-cn-beijing.aliyuncs.com/imgs/head.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description">äº«å—å­¤ç‹¬</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">foresta.yang</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/foresta-yang.github.io" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>æ–‡ç« ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80-%E5%BC%A0%E9%87%8F%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">1.</span> <span class="toc-text"> ä¸€ã€å¼ é‡çš„åŸºæœ¬æ“ä½œ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C-%E7%BB%B4%E5%BA%A6%E5%8F%98%E6%8D%A2"><span class="toc-number">2.</span> <span class="toc-text"> äºŒã€ç»´åº¦å˜æ¢</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#21-squeeze-vs-unsqueeze-%E7%BB%B4%E5%BA%A6%E5%A2%9E%E5%87%8F"><span class="toc-number">2.1.</span> <span class="toc-text"> 2.1 squeeze vs unsqueeze ç»´åº¦å¢å‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-transpose-vs-permute-%E7%BB%B4%E5%BA%A6%E4%BA%A4%E6%8D%A2"><span class="toc-number">2.2.</span> <span class="toc-text"> 2.2 transpose vs permute ç»´åº¦äº¤æ¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-reshape-vs-view"><span class="toc-number">2.3.</span> <span class="toc-text"> 2.3 reshape vs view</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-einsum"><span class="toc-number">2.4.</span> <span class="toc-text"> 2.4 einsum</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89-%E7%B4%A2%E5%BC%95%E5%88%87%E7%89%87"><span class="toc-number">3.</span> <span class="toc-text"> ä¸‰ã€ç´¢å¼•åˆ‡ç‰‡</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#31-%E8%A7%84%E5%88%99%E7%B4%A2%E5%BC%95%E5%88%87%E7%89%87%E6%96%B9%E5%BC%8F"><span class="toc-number">3.1.</span> <span class="toc-text"> 3.1 è§„åˆ™ç´¢å¼•åˆ‡ç‰‡æ–¹å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#32-gather-%E5%92%8C-torchindex_select-%E7%AE%97%E5%AD%90"><span class="toc-number">3.2.</span> <span class="toc-text"> 3.2 gather å’Œ torch.index_select ç®—å­</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B-%E5%90%88%E5%B9%B6%E5%88%86%E5%89%B2"><span class="toc-number">4.</span> <span class="toc-text"> å››ã€åˆå¹¶åˆ†å‰²</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#41-torchcat-%E5%92%8C-torchstack"><span class="toc-number">4.1.</span> <span class="toc-text"> 4.1 torch.cat å’Œ torch.stack</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#42-torchsplit-%E5%92%8C-torchchunk"><span class="toc-number">4.2.</span> <span class="toc-text"> 4.2 torch.split å’Œ torch.chunk</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94-%E5%8D%B7%E7%A7%AF%E7%9B%B8%E5%85%B3%E7%AE%97%E5%AD%90"><span class="toc-number">5.</span> <span class="toc-text"> äº”ã€å·ç§¯ç›¸å…³ç®—å­</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#51-%E4%B8%8A%E9%87%87%E6%A0%B7%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93"><span class="toc-number">5.1.</span> <span class="toc-text"> 5.1 ä¸Šé‡‡æ ·æ–¹æ³•æ€»ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#52-finterpolate-%E9%87%87%E6%A0%B7%E5%87%BD%E6%95%B0"><span class="toc-number">5.2.</span> <span class="toc-text"> 5.2 F.interpolate é‡‡æ ·å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#53-nnconvtranspose2d-%E5%8F%8D%E5%8D%B7%E7%A7%AF"><span class="toc-number">5.3.</span> <span class="toc-text"> 5.3 nn.ConvTranspose2d åå·ç§¯</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%95%E7%94%A8"><span class="toc-number">6.</span> <span class="toc-text"> å¼•ç”¨</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>æœ€è¿‘å‘å¸ƒ</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/04/18/Security/C_C++%E6%BC%8F%E6%B4%9E%E6%95%B0%E6%8D%AE%E9%9B%86/" title="C/C++æ¼æ´æ•°æ®é›†">C/C++æ¼æ´æ•°æ®é›†</a><time datetime="2024-04-18T09:46:15.000Z" title="å‘è¡¨äº 2024-04-18 17:46:15">2024-04-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/19/Papers/Vul/Cross-domain%20vulnerability%20detection%20using%20graph%20embedding%20and%20domain%20adaptation/" title="Cross-domain vulnerability detection using graph embedding and domain adaptation"><img src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://foresta.oss-cn-beijing.aliyuncs.com/images/202312191750331.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cross-domain vulnerability detection using graph embedding and domain adaptation"/></a><div class="content"><a class="title" href="/2023/12/19/Papers/Vul/Cross-domain%20vulnerability%20detection%20using%20graph%20embedding%20and%20domain%20adaptation/" title="Cross-domain vulnerability detection using graph embedding and domain adaptation">Cross-domain vulnerability detection using graph embedding and domain adaptation</a><time datetime="2023-12-19T07:32:24.000Z" title="å‘è¡¨äº 2023-12-19 15:32:24">2023-12-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/19/AILearning/pytorch/conv2d/" title="Conv2d"><img src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://foresta.oss-cn-beijing.aliyuncs.com/images/202312191226420.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Conv2d"/></a><div class="content"><a class="title" href="/2023/12/19/AILearning/pytorch/conv2d/" title="Conv2d">Conv2d</a><time datetime="2023-12-19T03:30:36.000Z" title="å‘è¡¨äº 2023-12-19 11:30:36">2023-12-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/19/AILearning/pytorch/pytorch/" title="pytorchå…¥é—¨"><img src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://foresta.oss-cn-beijing.aliyuncs.com/images/202312191226420.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="pytorchå…¥é—¨"/></a><div class="content"><a class="title" href="/2023/12/19/AILearning/pytorch/pytorch/" title="pytorchå…¥é—¨">pytorchå…¥é—¨</a><time datetime="2023-12-19T03:30:36.000Z" title="å‘è¡¨äº 2023-12-19 11:30:36">2023-12-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/19/AILearning/pytorch/tensor%E6%93%8D%E4%BD%9C/" title="torch tensoræ“ä½œ"><img src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/cover-default.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="torch tensoræ“ä½œ"/></a><div class="content"><a class="title" href="/2023/12/19/AILearning/pytorch/tensor%E6%93%8D%E4%BD%9C/" title="torch tensoræ“ä½œ">torch tensoræ“ä½œ</a><time datetime="2023-12-19T03:30:36.000Z" title="å‘è¡¨äº 2023-12-19 11:30:36">2023-12-19</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By foresta.yang</div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">æ–‡ç« </div><div class="length-num">56</div></a><a href="/tags/" title="tag"><div class="headline">æ ‡ç­¾</div><div class="length-num">30</div></a><a href="/categories/" title="category"><div class="headline">åˆ†ç±»</div><div class="length-num">16</div></a></div><span class="sidebar-menu-item-title">åŠŸèƒ½</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="æ˜¾ç¤ºæ¨¡å¼"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>æ˜¾ç¤ºæ¨¡å¼</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">ç½‘é¡µ</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="åšå®¢"><img class="back-menu-item-icon" src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="åšå®¢"/><span class="back-menu-item-text">åšå®¢</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">é¡¹ç›®</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="å®‰çŸ¥é±¼å›¾åºŠ"><img class="back-menu-item-icon" src= "/img/loading.gif" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="å®‰çŸ¥é±¼å›¾åºŠ"/><span class="back-menu-item-text">å®‰çŸ¥é±¼å›¾åºŠ</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> æ–‡ç« </span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> éš§é“</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> å‹é“¾</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> å‹äººå¸</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> ç•™è¨€æ¿</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> æˆ‘çš„</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> ç›¸å†Œ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> å³åˆ»emo</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> å…³äº</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> å…³äºæœ¬äºº</span></a></li></ul></div></div><span class="sidebar-menu-item-title">æ ‡ç­¾</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Binary/" style="font-size: 0.88rem;">Binary<sup>1</sup></a><a href="/tags/C-C/" style="font-size: 0.88rem;">C/C++<sup>2</sup></a><a href="/tags/CNN/" style="font-size: 0.88rem;">CNN<sup>1</sup></a><a href="/tags/DGL/" style="font-size: 0.88rem;">DGL<sup>1</sup></a><a href="/tags/DL%E7%9F%A5%E8%AF%86/" style="font-size: 0.88rem;">DLçŸ¥è¯†<sup>1</sup></a><a href="/tags/DL%E7%9F%A5%E8%AF%86%E7%82%B9/" style="font-size: 0.88rem;">DLçŸ¥è¯†ç‚¹<sup>3</sup></a><a href="/tags/Hexo/" style="font-size: 0.88rem;">Hexo<sup>2</sup></a><a href="/tags/LLM/" style="font-size: 0.88rem;">LLM<sup>1</sup></a><a href="/tags/LaTex/" style="font-size: 0.88rem;">LaTex<sup>1</sup></a><a href="/tags/PowerShell/" style="font-size: 0.88rem;">PowerShell<sup>1</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>1</sup></a><a href="/tags/Pytorch/" style="font-size: 0.88rem;">Pytorch<sup>6</sup></a><a href="/tags/Vulnerabilities/" style="font-size: 0.88rem;">Vulnerabilities<sup>19</sup></a><a href="/tags/conda/" style="font-size: 0.88rem;">conda<sup>1</sup></a><a href="/tags/git/" style="font-size: 0.88rem;">git<sup>1</sup></a><a href="/tags/overleaf/" style="font-size: 0.88rem;">overleaf<sup>2</sup></a><a href="/tags/pip/" style="font-size: 0.88rem;">pip<sup>1</sup></a><a href="/tags/sci%E6%8A%95%E7%A8%BF/" style="font-size: 0.88rem;">sciæŠ•ç¨¿<sup>1</sup></a><a href="/tags/tensor/" style="font-size: 0.88rem;">tensor<sup>2</sup></a><a href="/tags/tree-sitter/" style="font-size: 0.88rem;">tree-sitter<sup>1</sup></a><a href="/tags/%E4%BB%A3%E7%A0%81%E8%A1%8C%E7%BA%A7%E6%A3%80%E6%B5%8B/" style="font-size: 0.88rem;">ä»£ç è¡Œçº§æ£€æµ‹<sup>1</sup></a><a href="/tags/%E5%9F%BA%E6%9C%AC%E6%9C%AF%E8%AF%AD/" style="font-size: 0.88rem;">åŸºæœ¬æœ¯è¯­<sup>1</sup></a><a href="/tags/%E5%AD%A6%E4%B9%A0%E7%8E%87/" style="font-size: 0.88rem;">å­¦ä¹ ç‡<sup>1</sup></a><a href="/tags/%E5%AE%A1%E7%A8%BF/" style="font-size: 0.88rem;">å®¡ç¨¿<sup>1</sup></a><a href="/tags/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/" style="font-size: 0.88rem;">æ¼æ´åˆ†æ<sup>1</sup></a><a href="/tags/%E7%8E%AF%E5%A2%83/" style="font-size: 0.88rem;">ç¯å¢ƒ<sup>2</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90/" style="font-size: 0.88rem;">è½¯ä»¶åˆ†æ<sup>5</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6%E5%AE%89%E5%85%A8/" style="font-size: 0.88rem;">è½¯ä»¶å®‰å…¨<sup>23</sup></a><a href="/tags/%E8%BF%87%E7%A8%8B%E9%97%B4%E5%88%86%E6%9E%90/" style="font-size: 0.88rem;">è¿‡ç¨‹é—´åˆ†æ<sup>1</sup></a><a href="/tags/%E9%9D%99%E6%80%81%E5%88%86%E6%9E%90/" style="font-size: 0.88rem;">é™æ€åˆ†æ<sup>2</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">æ’­æ”¾éŸ³ä¹</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶é€‰ä¸­æ–‡æœ¬</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>ç²˜è´´æ–‡æœ¬</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>å¼•ç”¨åˆ°è¯„è®º</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>å¤åˆ¶é“¾æ¥åœ°å€</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>å¤åˆ¶æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>ä¸‹è½½æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>æ–°çª—å£æ‰“å¼€å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>ç«™å†…æœç´¢</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>ç™¾åº¦æœç´¢</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>æ’­æ”¾éŸ³ä¹</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>åˆ‡æ¢åˆ°ä¸Šä¸€é¦–</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>æŸ¥çœ‹æ‰€æœ‰æ­Œæ›²</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶æ­Œå</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>åšå®¢åˆ†ç±»</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>æ–‡ç« æ ‡ç­¾</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶åœ°å€</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">å…³é—­çƒ­è¯„</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">æ·±è‰²æ¨¡å¼</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>è½‰ç‚ºç¹é«”</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// æ¶ˆé™¤æ§åˆ¶å°æ‰“å°
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //åœ¨æ¢å¤å‰è¾“å‡ºæ—¥å¿—
  const grt = new Date("04/01/2023 00:00:00"); //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `æ¬¢è¿ä½¿ç”¨å®‰çŸ¥é±¼!`,
    `ç”Ÿæ´»æ˜æœ—, ä¸‡ç‰©å¯çˆ±`,
    `
        
       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â•šâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
      â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•   â•šâ•â•    â•šâ•â•â•â•â•â•
        
        `,
    "å·²ä¸Šçº¿",
    dnum,
    "å¤©",
    "Â©2023 By å®‰çŸ¥é±¼ V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `è°ƒç”¨å‰ç½®æ‘„åƒå¤´æ‹ç…§æˆåŠŸï¼Œè¯†åˆ«ä¸ºã€å°ç¬¨è›‹ã€‘.`, `Photo captured: `, `ğŸ¤ª`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c ä½ å¥½ï¼Œå°ç¬¨è›‹.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c âš¡ Powered by å®‰çŸ¥é±¼ %c ä½ æ­£åœ¨è®¿é—® foresta.yang çš„åšå®¢.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c ä½ å·²æ‰“å¼€æ§åˆ¶å°.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c ä½ ç°åœ¨æ­£å¤„äºç›‘æ§ä¸­.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.cbd.int/mathjax@3.2.2/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><link rel="stylesheet" type="text/css" href="https://cdn.cbd.int/katex@0.16.0/dist/katex.min.css"><script src="https://cdn.cbd.int/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    anzhiyu.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://mytwikoo-omega.vercel.app',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://mytwikoo-omega.vercel.app',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[å›¾ç‰‡]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[é“¾æ¥]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[ä»£ç ]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://mytwikoo-omega.vercel.app',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "æ— æ³•è·å–è¯„è®ºï¼Œè¯·ç¡®è®¤ç›¸å…³é…ç½®æ˜¯å¦æ­£ç¡®"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += 'æ²¡æœ‰è¯„è®º'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">é€šçŸ¥</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">ä½ å¥½å‘€</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>